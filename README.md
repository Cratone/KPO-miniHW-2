# Отчет о реализации системы управления зоопарком

## Реализованный функционал

### Реализация сценариев использования

- Добавление/удаление животного реализовано в `AnimalController.cs` через POST и DELETE запросы.
- Добавление/удаление вольера реализовано в `EnclosureController.cs` через POST и DELETE запросы.
- Перемещение животного между вольерами реализовано в `AnimalTransferService.cs` и сопровождается событием `AnimalMovedEvent`.
- Просмотр расписания кормления реализован в `FeedingScheduleController.cs` через GET запросы.
- Добавление нового кормления в расписание реализовано в `FeedingScheduleController.cs` через POST запрос.
- Просмотр статистики зоопарка реализован в `ZooStatisticsController.cs` через различные GET запросы.

### Классы доменной модели

Основная доменная модель состоит из трех основных сущностей:

1. **Животное** (`Domain/Entities/Animal.cs`)
   - Свойства: Вид, Кличка, Дата рождения, Пол, Любимая еда, Статус здоровья
   - Методы: Кормить, Лечить, Переместить в другой вольер

2. **Вольер** (`Domain/Entities/Enclosure.cs`)
   - Свойства: Тип, Размер, Текущее количество животных, Максимальная вместимость
   - Методы: Добавить животное, Убрать животное, Провести уборку

3. **Расписание кормления** (`Domain/Entities/FeedingSchedule.cs`)
   - Свойства: Животное, Время кормления, Тип пищи
   - Методы: Изменить расписание, Отметить выполнение

### Доменные сервисы

Необходимые доменные сервисы реализованы в слое приложения:

1. **AnimalTransferService** (`Application/Services/AnimalTransferService.cs`)
   - Обрабатывает логику перемещения животных между вольерами
   - Проверяет, подходит ли целевой вольер для животного
   - Вызывает событие AnimalMovedEvent при успешном перемещении животного

2. **FeedingOrganizationService** (`Application/Services/FeedingOrganizationService.cs`)
   - Управляет процессом кормления
   - Планирует кормления
   - Вызывает событие FeedingTimeEvent, когда приходит время кормить животное

3. **ZooStatisticsService** (`Application/Services/ZooStatisticsService.cs`)
   - Собирает статистику по зоопарку
   - Предоставляет информацию о количестве животных, вместимости вольеров и т.д.

### Доменные события

Были реализованы следующие доменные события:

1. **AnimalMovedEvent** (`Domain/Events/AnimalMovedEvent.cs`)
   - Вызывается при перемещении животного из одного вольера в другой
   - Содержит информацию о животном, исходном и целевом вольерах

2. **FeedingTimeEvent** (`Domain/Events/FeedingTimeEvent.cs`)
   - Вызывается, когда приходит время кормить животное
   - Содержит информацию о животном и деталях кормления

## Примененные концепции DDD

### 1. Сущности

- **Богатая доменная модель**: Сущности (`Animal`, `Enclosure`, `FeedingSchedule`) инкапсулируют как данные, так и поведение
- **Идентичность сущности**: Каждая сущность имеет уникальный идентификатор
- **Бизнес-логика**: Доменная логика встроена в сущности, а не в сервисы

### 2. Value objects

Реализованы несколько value object-ов для инкапсуляции доменных концепций, характеризуемых их атрибутами:

- `AnimalTypeValueObject`: Представляет тип животного
- `GenderValueObject`: Представляет пол животного
- `HealthStatusValueObject`: Представляет статус здоровья животного
- `TimeValueObject`: Представляет значение времени
- `DateValueObject`: Представляет значение даты
- `SpeciesValueObject`: Представляет вид животного
- `PositiveIntegerValueObject`: Гарантирует, что числовые значения положительны
- `NonEmptyStringValueObject`: Гарантирует, что строковые значения не пусты

### 3. Доменные события

- **Обработчики событий**: События обрабатываются конкретными обработчиками
- **Диспетчер событий**: Центральный механизм обрабатывает диспетчеризацию событий

### 4. Репозитории

Шаблон репозитория реализован для абстракции доступа к данным:

- `IAnimalRepository`: Интерфейс для доступа к данным о животных
- `IEnclosureRepository`: Интерфейс для доступа к данным о вольерах
- `IFeedingScheduleRepository`: Интерфейс для доступа к данным о расписании кормления

## Примененные принципы Чистой Архитектуры

Структура проекта следует принципам Чистой Архитектуры с четырьмя отдельными слоями:

### 1. Доменный слой (`Domain`)

- **Основная бизнес-логика**: Содержит сущности, объекты-значения и доменные события
- **Отсутствие зависимостей**: Этот слой не имеет зависимостей от других слоев
- **Чистые бизнес-правила**: Инкапсулирует бизнес-правила и логику

### 2. Слой приложения (`Application`)

- **Сценарии использования**: Реализует бизнес-правила, специфичные для приложения
- **Сервисы**: Содержит сервисы, которые организуют поток данных и доменных сущностей
- **Зависимости**: Зависит только от доменного слоя

### 3. Инфраструктурный слой (`Infrastructure`)

- **Доступ к данным**: Реализует репозитории, определенные в доменном слое
- **Внешние сервисы**: Обрабатывает взаимодействия с внешними системами
- **База данных в памяти**: Реализует требуемое решение для хранения данных в памяти
- **Зависимости**: Зависит от доменного и прикладного слоев

### 4. Слой представления (`Presentation`)

- **Web API**: Реализует REST API контроллеры для взаимодействия с системой
- **Контроллеры**: Обрабатывают HTTP-запросы и ответы
- **Интеграция Swagger**: Предоставляет документацию и возможности тестирования API
- **Зависимости**: Зависит от прикладного и инфраструктурного слоев

## Тестирование через Swagger

Приложение можно протестировать через Swagger UI:

1. Запустите приложение
2. Перейдите к `/swagger`
